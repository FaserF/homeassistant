---
#  - platform: rest
#    name: Fabian PC Shutdown
#    method: POST
#    resource: http://192.168.178.16:9170/command
#    headers:
#      Content-Type: 'application/json; charset=utf-8'
#      api-key: !secret system_bridge_fabian
#    payload: '{ "command": "shutdown /s /t 0", "arguments": [] }'
- platform: template
  switches:
    xiaomi_miio_cooker:
      icon_template: >-
        {% if is_state('sensor.xiaomi_miio_cooker_mode', 'Running') %}
          mdi:rice
        {% else %}
          mdi:bowl
        {% endif %}
      friendly_name: "Reiskocher"
      unique_id: xiaomi_miio_cooker
      value_template: "{{ is_state('sensor.xiaomi_miio_cooker_mode', 'Running') }}"
      turn_on:
        - condition: state
          entity_id: switch.kuchengerate
          state: 'off'
        - service: switch.turn_on
          entity_id: switch.kuchengerate
        - delay: '00:00:10'
        - service: xiaomi_miio_cooker.start
          data_template:
            profile: >
              {% if is_state('input_select.rice_cooker_program', 'Kochen 1h') %}
                02010000000001e101000000000000800101050814000000002091827d7800050091822d781c0a0091823c781c1e0091ff827820ffff91828278000500ffff8278ffffff91828278000d00ff828778ff000091827d7800000091827d7800ffff91826078ff0100490366780701086c0078090301af540266780801086c00780a02023c5701667b0e010a71007a0d02ffff5701667b0f010a73007d0d032005000000000000000000000000000000cf53
              {% elif is_state('input_select.rice_cooker_program', 'schnelles Kochen') %}
                02010100000002e100280000000000800101050614000000002091827d7800000091823c7820000091823c781c1e0091ff827820ffff91828278000500ffff8278ffffff91828278000d00ff828778ff000082827d7800000091827d7800ffff91826078ff0164490366780701086c007409030200540266780801086c00760a0202785701667b0e010a7100780a02ffff5701667b0f010a73007b0a032005000000000000000000000000000000ddba
              {% elif is_state('input_select.rice_cooker_program', 'Porridge') %}
                02010200000003e2011e0400002800800101050614000000002091827d7800000091827d7800000091827d78001e0091ff877820ffff91827d78001e0091ff8278ffffff91828278001e0091828278060f0091827d7804000091827d7800000091827d780001f54e0255261802062a0482030002eb4e0255261802062a04820300032d4e0252261802062c04820501ffff4e0152241802062c0482050120000000000000000000000000000000009ce2
              {% elif is_state('input_select.rice_cooker_program', 'WÃ¤rmen') %}
                020103000000040c00001800000100800100000000000000002091827d7800000091827d7800000091827d78000000915a7d7820000091827d7800000091826e78ff000091827d7800000091826e7810000091826e7810000091827d7800000091827d780000a082007882140010871478030000eb820078821400108714780300012d8200788214001087147a0501ffff8200788214001087147d0501200000000000000000000000000000000090e5
              {% elif is_state('input_select.rice_cooker_program', 'Sonstiges') %}
                02010400000005e601000100000a00800102050a14000000002091827d7800000091827d7800000091827d78001e00915a7d7820000091827d7800000091826e78ff000091827d7800000091826e7810ffff91827d78ff000091827d7800000091827d780000a082007882140010871478030000eb820078821400108714780300012d8200788214001087147a0501ffff8200788214001087147d0501200000000000000000000000000000000020b5
              {% else %}
                02010400000005e601000100000a00800102050a14000000002091827d7800000091827d7800000091827d78001e00915a7d7820000091827d7800000091826e78ff000091827d7800000091826e7810ffff91827d78ff000091827d7800000091827d780000a082007882140010871478030000eb820078821400108714780300012d8200788214001087147a0501ffff8200788214001087147d0501200000000000000000000000000000000020b5
              {% endif %}
      turn_off:
        service: xiaomi_miio_cooker.stop
